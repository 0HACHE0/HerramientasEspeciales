<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https:stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="eH.css">

    <title>HERRAMIENTAS ESPECIALES</title>
  </head>
  <body bgcolor="FFCECB">

    <nav class="navbar navbar-dark bg-dark sticky-top">
      <a class="navbar-brand" href="#">
        <img src="h.jpg" width="60" height="60" class="d-inline-block align-center" alt="" loading="lazy"> AVELLANADOR
      </a>
       <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
     

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a class="nav-link" href="#">AVELLANADOR</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="brocas.html">BROCAS Y MUELAS</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="brocayavellanador.html">BROCA - AVELLANADOR</a>
          </li>
        </ul>
      </div>
    </nav>

    <br>

    <form>
      <div class="row col-md-10 ml-auto mr-auto">

        <div class="col-md-6 ml-auto mr-auto">

          <div class="form-group row">
            <p class="fontH col-3 col-form-label">Cliente:</p>
            <div class="col-9">
              <input type="text" class="form-control form-control-sm" id="cliente">
            </div>
          </div>

          <div class="row col-md-10 ml-auto mr-auto">
            <label class="ml-auto mr-auto fontH0">Pieza</label>
          </div>

          <div class="form-group col-md-12">
            <label class="fontH">Diametro:</label>
            <input type="number" class="form-control form-control-sm" id="diametro" placeholder="0" min="0" max ="60">
          </div>

          <div class="form-group col-md-12">
            <label class="fontH">Ancho:</label>
            <input type="number" class="form-control form-control-sm" id="ancho" placeholder="0" min="0">
          </div>

          
          <div class="form-group col-md-12">
            <label class="fontH">Ángulo:</label>
            <input type="number" class="form-control form-control-sm" id="angulo" placeholder="0" min="0" max ="180">
          </div>

          <div class="form-group col-md-12">
            <label class="fontH">Cantidad de Diamante:</label>
            <input type="number" class="form-control form-control-sm" id="diamante" placeholder="0" min="0">
          </div>

          <div class="form-group col-md-12">
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="checkbox" id="bujeros1" value="2" onclick="deshabilitaCheckBox(value)">
              <label class="form-check-label fontH" >Sin Abertura</label>
            </div>

            <div class="form-check form-check-inline">
              <input class="form-check-input" type="checkbox" id="bujeros2" value="1" onclick="deshabilitaCheckBox(value)">
              <label class="form-check-label fontH" >Con Abertura</label>
            </div>
          </div>
          

        </div>

        <div class="col-md-6 ml-auto mr-auto">

          <div class="row col-md-10 ml-auto mr-auto">
            <label class="ml-auto mr-auto fontH0">Materiales</label>
          </div>
          
          <br>

          <div class="form-group row">
            <p class="fontH col-4 col-form-label">Bronce:</p>
            <div class="col-6">
              <input type="number" class="form-control form-control-sm" id="material1" placeholder="0" min="0" max ="100">
            </div>
            <p class="fontH col-2 col-form-label">%</p>
          </div>

          <div class="form-group row">
            <p class="fontH col-4 col-form-label">Cobalto:</p>
            <div class="col-6">
              <input type="number" class="form-control form-control-sm" id="material2" placeholder="0" min="0" max ="100">
            </div>
            <p class="fontH col-2 col-form-label">%</p>

          </div>

          <div class="form-group row">
            <p class="fontH col-4 col-form-label">Hierro:</p>
            <div class="col-6">
              <input type="number" class="form-control form-control-sm" id="material3" placeholder="0" min="0" max ="100">
            </div>
            <p class="fontH col-2 col-form-label">%</p>
          </div>

          <div class="form-group row">
            <p class="fontH col-4 col-form-label">Manganeso:</p>
            <div class="col-6">
              <input type="number" class="form-control form-control-sm" id="material4" placeholder="0" min="0" max ="100">
            </div>
            <p class="fontH col-2 col-form-label">%</p>
          </div>

          <div class="form-group row">
            <p class="fontH col-4 col-form-label">Niquel:</p>
            <div class="col-6">
              <input type="number" class="form-control form-control-sm" id="material5" placeholder="0" min="0" max ="100">
            </div>
            <p class="fontH col-2 col-form-label">%</p>
          </div>

          <div class="form-group row">
            <p class="fontH col-4 col-form-label">Zinc:</p>
            <div class="col-6">
              <input type="number" class="form-control form-control-sm" id="material6" placeholder="0" min="0" max ="100">
            </div>
            <p class="fontH col-2 col-form-label">%</p>
          </div>

          <div class="form-group row">
            <p class="fontH col-4 col-form-label">Grafito:</p>
            <div class="col-6">
              <input type="number" class="form-control form-control-sm" id="material7" placeholder="0" min="0" max ="100">
            </div>
            <p class="fontH col-2 col-form-label">%</p>
          </div>

        </div>

        <div class="form-group col-md-12">
          <button type="button" class="btn btn-danger float-right" style="align-items: right;" onclick="calcular()">Calcular</button>
        </div>

      </div>



    </form>

    <!-- Modal -->
        <div class="modal fade" id="modalH" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header" id="colorModalHache">
                <h5 class="modal-title" id="modalTitleH"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body" id="modalBodyH"></div>
              <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">CERRAR</button>
              </div>
            </div>
          </div>
        </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https:code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https:cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https:stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>

    <script type="text/javascript">

      document.getElementById("bujeros1").checked = true;

      function calcular(){

        var cadena = "";
        var separador = "<br>";
        var mm = "mm";
        var mm3 = "mm3";
        var gr = "gr";
        var ang = "°";
        var porc = "%";
        var negra0 = "<strong>";
        var negra1 = "</strong>";

        //CONSTANTES
        var d0 = 0.0571;      //Diamante
        var material0n = "DIAMANTE";
        var d1 = 8.5;       //bronce
        var material1n = "BRONCE";
        var d2 = 8.9;       //cobalto
        var material2n = "COBALTO";
        var d3 = 7.84;      //hierro
        var material3n = "HIERRO";
        var d4 = 7.4;       //manganeso
        var material4n = "MANGANESO";
        var d5 = 7.68;      //niquel
        var material5n = "NIQUEL";
        var d6 = 7.14;      //zinc
        var material6n = "ZINC";
        var d7 = 2.25;      //grafito
        var material7n = "GRAFITO";

        if (validaciones()==0){

              cadena += separador;
              cadena += negra0 + "MEDIDAS DE LA PIEZA INGRESADAS AL SISTEMA" + negra1 + separador;

          //DATOS QUE INGRESA EL USUARIO
          //DIAMETRO
          var diametroForm = document.getElementById("diametro").value * 1;
              cadena += "DIAMETRO:     " + diametroForm + mm + separador;
          //ANGULO
          var anguloForm = document.getElementById("angulo").value * 1;
              cadena += "ÁNGULO:     " + anguloForm + ang + separador;
          //ANCHURA
          var anchoForm = document.getElementById("ancho").value * 1;
              cadena += "ANCHO:     " + anchoForm + mm + separador;
          //DIAMANTE
          var diamanteForm = document.getElementById("diamante").value * 1;
              cadena += "DIAMANTE:     " + diamanteForm + separador;
          //ABERTURA
          var conBujerosForm = document.getElementById("bujeros2").checked;
              if(conBujerosForm==true) cadena += "ABERTURA: SÍ" + separador;
              else cadena += "ABERTURA: NO" + separador;


              cadena += separador;
            
              cadena += negra0 + "MEDIDAS DE LA PIEZA QUE SE CALCULAN" + negra1 +separador;



                                                                                                      //CALCULOS DE VOLUMEN DEL CONO*/
          //CALCULOS ANGULO, CATETO E HIPOTENUSA.
          var rad = (Math.PI * anguloForm ) / 180 ;
          var anguloCal = Math.cos(rad);   

          //RADIO CONO MAYOR
          var rE = diametroForm / 2;
              cadena += "RADIO EXTERIOR:     " + rE + mm + separador;
          //RADIO CUADRADO
          var rE2 = rE * rE;

     
          //HIPOTENUSA CONO MAYOR
          var hipoE = rE / anguloCal;
              cadena += "HIPOTENUSA EXTERIOR:     " + hipoE + mm + separador;
          //HIPOTENUSA CUADRADA
          var hipoE2 = hipoE * hipoE;


          var b2 = (hipoE2) - (rE2);
          //ALTURA CONO MAYOR
          var alturaE = Math.sqrt(b2);
              cadena += "ALTURA EXTERIOR:     " + alturaE + mm + separador;

          //VOLUMEN CONO MAYOR*/
          var vConoM0 = (Math.PI * rE2 * alturaE) / 3;



          //RADIO CONO MENOR
          var rI = rE - anchoForm;
              cadena += "RADIO INTERIOR:     " + rI + mm + separador;
              cadena += separador;
          //RADIO CONO MENOR CUADRADO
          var rI2 = rI * rI;

          //HIPOTENUSA CONO MENOR
          var hipoI = rI / anguloCal;
          //HIPOTENUSA CONO MENOR CUADRADA
          var hipoI2 = hipoI * hipoI;

          
          b2 = (hipoI2) - (rI2);
          //ALTURA CONO MENOR
          var alturaI = Math.sqrt(b2);

          //VOLUMEN CONO MENOR*/
          var vConoM1 = (Math.PI * rI2 * alturaI) / 3;


          var vT0 = vConoM0 - vConoM1;

                                                                                                      //CALCULOS DE VOLUMEN DE LA BASE*/

          var vCilM0 = Math.PI * rE2 * anchoForm;

          var vCilM1 = Math.PI * anchoForm * ( (rE2) + (rI2) + (rE * rI) ) / 3;

          var vT1 = vCilM0 - vCilM1;

                                                                                                      //CALCULO VOLUMEN DE BUJEROS*/

          var hBujero = hipoE - 3 - 3;

          var vBujero = hBujero * 3 * 3;

          var vTBujeros = vBujero * 3;

          if(conBujerosForm==false) vTBujeros = 0;
          


                                                                                                      //CALCULOS DE VOLUMEN DE LA PIEZA COMPLETA
          cadena += negra0 + "CALCULOS DEL VOLUMEN DE AVELLANADOR" + negra1 +separador;
          //VOLUMEN TOTAL SIN DIAMANTE
          var vTSinD = vT0 + vT1 - vTBujeros;
              cadena += "VOLUMEN TOTAL SIN DIAMANTE:     " + vTSinD + mm3 + separador;


          //CANTIDAD DE DIAMANTE (SE PASA A %)*/
          var diamante = (diamanteForm * 4.4) / 100;
              cadena += "PORCENTAJE DE DIAMANTE:     " + diamante + porc + separador;

          var kilates = (vTSinD * diamante) / 1000;

          var g0 = kilates/5;

          var vD = kilates * d0 * 1000;
              cadena += "VOLUMEN DIAMANTE:     " + vD + mm3 + separador;

          var vTConD = vTSinD - vD;
              cadena += "VOLUMEN TOTAL CON DIAMANTE:     " + vTConD+ mm3 + separador;

              cadena += separador;

              cadena += negra0 + "MATRIZ DE MATERIALES" + negra1 +separador;
  

          var m1=0, m2=0, m3=0, m4=0, m5=0, m6=0, m7=0;

          var auxMaterial;

          for (var i = 1; i <= 7; i++) {
            auxMaterial = document.getElementById("material"+i).value * 1;
            if (auxMaterial!=0){
              if(i==1){  m1 = (d1 * vTConD) / 1000;   cadena += material1n+": " + m1 + separador;
              }if(i==2){ m2 = (d2 * vTConD) / 1000;   cadena += material2n+": " + m2 + separador;
              }if(i==3){ m3 = (d3 * vTConD) / 1000;   cadena += material3n+": " + m3 + separador;
              }if(i==4){ m4 = (d4 * vTConD) / 1000;   cadena += material4n+": " + m4 + separador;
              }if(i==5){ m5 = (d5 * vTConD) / 1000;   cadena += material5n+": " + m5 + separador;
              }if(i==6){ m6 = (d6 * vTConD) / 1000;   cadena += material6n+": " + m6 + separador;
              }if(i==7){ m7 = (d7 * vTConD) / 1000;   cadena += material7n+": " + m7 + separador;
              }
            }
          }

              cadena += separador;

          var g1=0, g2=0, g3=0, g4=0, g5=0, g6=0, g7=0;

              cadena += negra0 + "GRAMOS DE MATERIALES" + negra1 +separador;

              cadena += material0n+"("+diamante+"%): " + g0 + gr + separador;

          //alert("Se requieren " + g0 + " gr de " + material0n);

          for (var i = 1; i <= 7; i++) {
            auxMaterial = document.getElementById("material"+i).value * 1;
            if (auxMaterial!=0){
              if(i==1){  g1 = (auxMaterial * m1) / 100;  cadena += material1n+"("+auxMaterial+"%): " + g1 + gr + separador;
              }if(i==2){ g2 = (auxMaterial * m2) / 100;  cadena += material2n+"("+auxMaterial+"%): " + g2 + gr + separador;
              }if(i==3){ g3 = (auxMaterial * m3) / 100;  cadena += material3n+"("+auxMaterial+"%): " + g3 + gr + separador;
              }if(i==4){ g4 = (auxMaterial * m4) / 100;  cadena += material4n+"("+auxMaterial+"%): " + g4 + gr + separador;
              }if(i==5){ g5 = (auxMaterial * m5) / 100;  cadena += material5n+"("+auxMaterial+"%): " + g5 + gr + separador;
              }if(i==6){ g6 = (auxMaterial * m6) / 100;  cadena += material6n+"("+auxMaterial+"%): " + g6 + gr + separador;
              }if(i==7){ g7 = (auxMaterial * m7) / 100;  cadena += material7n+"("+auxMaterial+"%): " + g7 + gr + separador;
              }
            }
          }

          //IMPRESIÓN DE DATOS TÉCNICOS.
          imprimeModalInfo(cadena,1);
        }
      }

      
      function validaciones(){
          var diametro = document.getElementById("diametro").value*1;
          var ancho = document.getElementById("ancho").value*1;
          var angulo = document.getElementById("angulo").value*1;
          var diamante = document.getElementById("diamante").value*1;
          var porcent = 0;
          for (var i = 1; i <= 7; i++) {
            var material = document.getElementById("material"+i).value * 1;
            porcent+=material;
          }
          
          if(diametro <= 0){imprimeModalInfo("Ingresa un <strong>DIAMETRO</strong> correcto.",2); return 1;}
          else if(ancho <= 0){imprimeModalInfo("Ingresa un <strong>ANCHO</strong> correcto.",2); return 1;}
          else if(angulo <= 0 || angulo >= 90){imprimeModalInfo("Ingresa un <strong>ÁNGULO</strong> correcto.",2); return 1;}
          else if(diamante <= 0){imprimeModalInfo("Ingresa cantidad de <strong>DIAMANTE</strong> correcta.",2); return 1;}
          else if(porcent != 100){alert("WARNING!\n\nLas cantidades de MATERIALES no corresponden al 100%."); return 0;}
          else return 0;
      }

      function deshabilitaCheckBox(value){
          document.getElementById("bujeros"+value).checked = false;
      }

      function imprimeModalInfo(cadena, id){

        $('#colorModalHache').removeClass();

        if (id==1){
          $('#colorModalHache').addClass("bg-success");
          $('#colorModalHache').addClass("modal-header");
          $('#modalTitleH').html("INFORMACIÓN TÉCNICA");
        }
        else {
          $('#colorModalHache').addClass("bg-danger");
          $('#colorModalHache').addClass("modal-header");
          $('#modalTitleH').html("ERROR!");
        }
         
        $('#modalBodyH').html("<BR>"+cadena+"<BR><BR>");
        $('#modalH').modal('show');
      }
      

    </script>

  </body>
</html>
